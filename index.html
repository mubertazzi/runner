<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tapis Control - Controllo Tapis Roulant</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Intestazione con nuovo titolo -->
        <div class="header">
            <h1 class="app-title">
                <span class="logo-icon">üèÉ‚Äç‚ôÇÔ∏è</span>
                <span class="app-name">TAPIS</span>
                <span class="app-name-secondary">CONTROL</span>
            </h1>
            <div class="switch-container">
                <label class="switch">
                    <input type="checkbox" id="connectSwitch">
                    <span class="slider round"></span>
                </label>
                <div id="connectionStatus" class="connection-status">Disconnesso</div>
            </div>
        </div>

        <!-- Controlli della velocit√† -->
        <div class="speed-control">
            <button id="decreaseSpeed">-</button>
            <input type="text" id="speedInput" value="1.0" readonly>
            <button id="increaseSpeed">+</button>
        </div>

        <!-- Pallini di velocit√† -->
        <div class="speed-dots">
            <span class="dot" data-speed="1">1</span>
            <span class="dot" data-speed="2">2</span>
            <span class="dot" data-speed="3">3</span>
            <span class="dot" data-speed="4">4</span>
            <span class="dot" data-speed="5">5</span>
            <span class="dot" data-speed="6">6</span>
            <span class="dot" data-speed="7">7</span>
            <span class="dot" data-speed="8">8</span>
            <span class="dot" data-speed="9">9</span>
            <span class="dot" data-speed="10">10</span>
        </div>

        <!-- Parametri (velocit√†, tempo, distanza) -->
        <div class="parameter-container">
            <div class="parameter-item">
                <span class="parameter-label">Velocit√†:</span>
                <span id="currentSpeed" class="parameter-value">0.0 km/h</span>
            </div>
            <div class="parameter-item">
                <span class="parameter-label">Tempo:</span>
                <span id="elapsedTime" class="parameter-value">00:00:00</span>
            </div>
            <div class="parameter-item">
                <span class="parameter-label">Distanza:</span>
                <span id="distance" class="parameter-value">0.000 km</span>
            </div>
        </div>

        <!-- Pulsanti di controllo -->
        <div class="bottom-controls">
            <div class="start-stop-controls">
                <!-- Pulsante START -->
                <button id="start" class="icon-button">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M8 5v14l11-7z"/>
                    </svg>
                </button>

                <!-- Pulsante PAUSA/RIPRENDI -->
                <button id="pause" class="icon-button">
                    <svg viewBox="0 0 26 26" width="26" height="26">
                        <!-- Barra sinistra (pausa) -->
                        <rect x="4" y="5" width="4" height="14" fill="currentColor"/>
                        <!-- Barra destra (pausa) -->
                        <rect x="10" y="5" width="4" height="14" fill="currentColor"/>
                        <!-- Triangolo (play) -->
                        <path fill="currentColor" d="M16 5v14l11-7z"/>
                    </svg>
                </button>

                <!-- Pulsante STOP -->
                <button id="stop" class="icon-button">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M6 6h12v12H6z"/>
                    </svg>
                </button>

                <!-- Pulsante PIANO -->
                <button id="selectPlan" class="icon-button">
                    <svg viewBox="0 0 26 24" width="26" height="24">
                        <!-- Icona piano di allenamento (grafico a barre con 5 barre) -->
                        <rect x="2" y="8" width="3" height="8" fill="currentColor"/>
                        <rect x="7" y="4" width="3" height="12" fill="currentColor"/>
                        <rect x="12" y="6" width="3" height="10" fill="currentColor"/>
                        <rect x="17" y="2" width="3" height="14" fill="currentColor"/>
                        <rect x="22" y="10" width="3" height="6" fill="currentColor"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Sezione piano di allenamento -->
        <div id="plan-info" class="plan-info">
            <button class="close-button">√ó</button> <!-- Icona X -->
            <h3 id="allenamento-titolo">ALLENAMENTO: </h3> <!-- Titolo dinamico -->
            <div class="parametri-container">
                <span class="parametri">Tempo: <span id="tempo-totale">0 min</span> - Distanza: <span id="distanza-totale">0.00 km</span></span>
            </div>
            <div class="fase-attuale">
                <span class="nome-fase"></span>
                <span class="conto-alla-rovescia"></span>
            </div>
            <div class="plan-histogram"></div>
        </div>
    </div>

    <!-- Messaggio di completamento -->
    <div id="completionMessage" class="completion-message">
        Complimenti! Hai completato l'allenamento. üéâ
    </div>

    <!-- Popup per la selezione del piano -->
    <div id="planSelectionPopup" class="popup">
        <div class="popup-content">
            <h3>Seleziona un piano di allenamento</h3>
            <div class="dropdown-container">
                <select id="planDropdown" class="styled-dropdown">
                    <!-- Opzioni dei file JSON verranno caricate dinamicamente -->
                </select>
            </div>
            <div class="popup-buttons">
                <button id="cancelPlanSelection" class="popup-button cancel">Annulla</button>
				<button id="editPlan" class="popup-button" style="background-color: #008CBA;">
					<svg viewBox="0 0 24 24" width="24" height="24">
						<path fill="white" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
					</svg>
				</button>				
                <button id="uploadPlan" class="popup-button upload">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                    </svg>
                </button>                
                <button id="confirmPlanSelection" class="popup-button confirm">Conferma</button>                
            </div>
        </div>
    </div>

    <script src="bluetooth.js"></script>
    <script src="ui.js"></script>
	<script src="creaPiano.js"></script>
</body>
</html>
